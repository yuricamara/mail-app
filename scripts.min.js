var requirejs,require,define;(function(e){function h(e,t){return f.call(e,t)}function p(e,t){var n,r,i,s,o,a,f,l,h,p,d,v=t&&t.split("/"),m=u.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){e=e.split("/"),o=e.length-1,u.nodeIdCompat&&c.test(e[o])&&(e[o]=e[o].replace(c,"")),e=v.slice(0,v.length-1).concat(e);for(h=0;h<e.length;h+=1){d=e[h];if(d===".")e.splice(h,1),h-=1;else if(d===".."){if(h===1&&(e[2]===".."||e[0]===".."))break;h>0&&(e.splice(h-1,2),h-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(h=n.length;h>0;h-=1){r=n.slice(0,h).join("/");if(v)for(p=v.length;p>0;p-=1){i=m[v.slice(0,p).join("/")];if(i){i=i[r];if(i){s=i,a=h;break}}}if(s)break;!f&&g&&g[r]&&(f=g[r],l=h)}!s&&f&&(s=f,a=l),s&&(n.splice(0,a,s),e=n.join("/"))}return e}function d(t,r){return function(){var i=l.call(arguments,0);return typeof i[0]!="string"&&i.length===1&&i.push(null),n.apply(e,i.concat([t,r]))}}function v(e){return function(t){return p(t,e)}}function m(e){return function(t){s[e]=t}}function g(n){if(h(o,n)){var r=o[n];delete o[n],a[n]=!0,t.apply(e,r)}if(!h(s,n)&&!h(a,n))throw new Error("No "+n);return s[n]}function y(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function b(e){return function(){return u&&u.config&&u.config[e]||{}}}var t,n,r,i,s={},o={},u={},a={},f=Object.prototype.hasOwnProperty,l=[].slice,c=/\.js$/;r=function(e,t){var n,r=y(e),i=r[0];return e=r[1],i&&(i=p(i,t),n=g(i)),i?n&&n.normalize?e=n.normalize(e,v(t)):e=p(e,t):(e=p(e,t),r=y(e),i=r[0],e=r[1],i&&(n=g(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},i={require:function(e){return d(e)},exports:function(e){var t=s[e];return typeof t!="undefined"?t:s[e]={}},module:function(e){return{id:e,uri:"",exports:s[e],config:b(e)}}},t=function(t,n,u,f){var l,c,p,v,y,b=[],w=typeof u,E;f=f||t;if(w==="undefined"||w==="function"){n=!n.length&&u.length?["require","exports","module"]:n;for(y=0;y<n.length;y+=1){v=r(n[y],f),c=v.f;if(c==="require")b[y]=i.require(t);else if(c==="exports")b[y]=i.exports(t),E=!0;else if(c==="module")l=b[y]=i.module(t);else if(h(s,c)||h(o,c)||h(a,c))b[y]=g(c);else{if(!v.p)throw new Error(t+" missing "+c);v.p.load(v.n,d(f,!0),m(c),{}),b[y]=s[c]}}p=u?u.apply(s[t],b):undefined;if(t)if(l&&l.exports!==e&&l.exports!==s[t])s[t]=l.exports;else if(p!==e||!E)s[t]=p}else t&&(s[t]=u)},requirejs=require=n=function(s,o,a,f,l){if(typeof s=="string")return i[s]?i[s](o):g(r(s,o).f);if(!s.splice){u=s,u.deps&&n(u.deps,u.callback);if(!o)return;o.splice?(s=o,o=a,a=null):s=e}return o=o||function(){},typeof a=="function"&&(a=f,f=l),f?t(e,s,o,a):setTimeout(function(){t(e,s,o,a)},4),n},n.config=function(e){return n(e)},requirejs._defined=s,define=function(e,t,n){if(typeof e!="string")throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),!h(s,e)&&!h(o,e)&&(o[e]=[e,t,n])},define.amd={jQuery:!0}})(),define("../vendors/bower_components/almond/almond",function(){}),define("featureDetection",[],function(){var e={svg:function(){return!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect?!1:!0},matchMedia:function(){return window.matchMedia?!1:!0}};return e}),define("text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.14",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.lastIndexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i[0]==="﻿"&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("text!shortMail",[],function(){return'<section data-id="({%=mail_number%})" data-label="({%=category%})" class="m-short-mail js-short-mail">\r\n  <h3 class="m-short-mail_title">\r\n    E-mail number ({%=mail_number%})\r\n  </h3>\r\n\r\n  <img class="m-short-mail_sender-picture" src="images/contacts/({%=sender_name%})-smartphone.jpg" srcset="images/contacts/({%=sender_name%})-smartphone.jpg 1x, images/contacts/({%=sender_name%})-smartphone@2x.jpg 2x" width="60" height="60" alt="({%=sender_name%})´s photo">\r\n\r\n  <a class="th-label-({%=category%}) m-short-mail_label">Client Label</a>\r\n\r\n  <div class="m-short-mail_content">\r\n    <div class="m-short-mail_top">\r\n      <p class="m-short-mail_sender">\r\n        <strong>\r\n          ({%=sender_name%})\r\n        </strong>\r\n      </p>\r\n      <time class="m-short-mail_maildate" datetime="2014-({%=month_number%})-({%=day%})">\r\n        ({%=month_string%}) ({%=day%})\r\n      </time>\r\n    </div>\r\n\r\n    <svg class="m-short-mail_icon-clips" data-icon="clips" version="1.1" xmlns="http://www.w3.org/2000/svg" width="12" height="12" aria-labelledby="svgicon_clips-title-({%=mail_number%}) svgicon_clips-desc-({%=mail_number%})">\r\n      <title id="svgicon_clips-title-({%=mail_number%})">Clips icon</title>\r\n      <desc id="svgicon_clips-desc-({%=mail_number%})">This e-mail has attachments</desc>\r\n      <use xlink:href="#clips-icon" />\r\n    </svg>\r\n\r\n    <p class="m-short-mail_message m-short-mail_long-body">\r\n      ({%=subject%}) - ({%=content_long%})\r\n    </p>\r\n\r\n    <p class="m-short-mail_message m-short-mail_short-body">\r\n      ({%=subject%}) - ({%=content_short%})\r\n    </p>\r\n\r\n    <svg class="m-short-mail_icon-star" data-icon="star" version="1.1" xmlns="http://www.w3.org/2000/svg" width="15" height="15" aria-labelledby="svgicon_star-title-({%=mail_number%}) svgicon_star-desc-({%=mail_number%})">\r\n      <title id="svgicon_star-title-({%=mail_number%})">Star icon</title>\r\n      <desc id="svgicon_star-desc-({%=mail_number%})">Click to set or unset this e-mail as favourite</desc>\r\n      <a xlink:href="#">\r\n        <rect fill="transparent" width="15" height="15"></rect>\r\n        <use xlink:href="#star-icon" />\r\n      </a>\r\n    </svg>\r\n  </div>\r\n</section>\r\n'}),define("text!openedMail",[],function(){return'<article id="mail-({%=mail_number%})" class="m-mail-opened">\r\n\r\n  <!-- Acessibility reference -->\r\n  <h2 class="m-mail-opened_title">Opened email</h2>\r\n\r\n  <div class="m-mail-opened_header">\r\n    <div class="m-mail-opened_header_top">\r\n      <div class="m-mail-opened_header_top_left">\r\n        <svg class="m-mail-opened_header_icon-star" data-icon="star" version="1.1" xmlns="http://www.w3.org/2000/svg" width="15" height="15" aria-labelledby="svgicon_star-title-({%=mail_number%})-opened svgicon_star-desc-({%=mail_number%})-opened">\r\n          <title id="svgicon_star-title-({%=mail_number%})-opened">Star icon</title>\r\n          <desc id="svgicon_star-desc-({%=mail_number%})-opened">Click to set or unset this e-mail as favourite</desc>\r\n          <a xlink:href="#">\r\n            <rect fill="transparent" width="15" height="15"></rect>\r\n            <use xlink:href="#star-icon" />\r\n          </a>\r\n        </svg>\r\n        <p class="m-mail-opened_header_title">({%=subject%})</p>\r\n      </div>\r\n      <div class="m-mail-opened_header_top_right">\r\n        <svg class="m-mail-opened_header_icon-answer" data-icon="answer" version="1.1" xmlns="http://www.w3.org/2000/svg" width="15" height="15" aria-labelledby="svgicon_answer-title-({%=mail_number%})-opened svgicon_answer-desc-({%=mail_number%})-opened">\r\n          <title id="svgicon_answer-title-({%=mail_number%})-opened">Reply icon</title>\r\n          <desc id="svgicon_answer-desc-({%=mail_number%})-opened">Click to reply this e-mail</desc>\r\n          <use xlink:href="#undo-icon"></use>\r\n        </svg>\r\n        <svg class="m-mail-opened_header_icon-trash" data-icon="trash" version="1.1" xmlns="http://www.w3.org/2000/svg" width="13" height="12" aria-labelledby="svgicon_trash-title-({%=mail_number%})-opened svgicon_trash-desc-({%=mail_number%})-opened">\r\n          <title id="svgicon_trash-title-({%=mail_number%})-opened">Trash icon</title>\r\n          <desc id="svgicon_trash-desc-({%=mail_number%})-opened">Click to delete this e-mail</desc>\r\n          <use xlink:href="#trash-icon"></use>\r\n        </svg>\r\n      </div>\r\n    </div>\r\n    <div class="m-mail-opened_header_bottom">\r\n      <div class="m-mail-opened_header_bottom_left">\r\n        <img class="m-mail-opened_header_sender-picture" src="images/contacts/({%=sender_name%})-desktop.jpg" srcset="images/contacts/({%=sender_name%})-desktop.jpg 1x, images/contacts/({%=sender_name%})-desktop@2x.jpg 2x"  width="35" height="35" alt="Mily´s photo">\r\n\r\n        <p class="m-mail-opened_header_exchange">\r\n          <strong class="m-mail-opened_header_exchange-sender">({%=sender_name%})</strong>to me\r\n        </p>\r\n\r\n        <div class="m-mail-opened_header_menu">\r\n          <button class="m-mail-opened_header_menu-btn" type="button" id="menu_main-actions-opened" aria-expanded="false">\r\n            <span class="m-mail-opened_header_menu-btn-arrow-down m-btn-arrow-down" >\r\n              <svg data-icon="arrow-down" version="1.1" xmlns="http://www.w3.org/2000/svg" width="17" height="13" aria-labelledby="svgicon_arrow-down-title-({%=mail_number%})-opened svgicon_arrow-down-desc-({%=mail_number%})-opened">\r\n                <title id="svgicon_arrow-down-title-({%=mail_number%})-opened">Menu icon</title>\r\n                <desc id="svgicon_arrow-down-desc-({%=mail_number%})-opened">Click to choose an item</desc>\r\n                <use xlink:href="#arrow-down-icon" />\r\n              </svg>\r\n            </span>\r\n          </button>\r\n          <ul hidden role="menu" aria-labelledby="menu_main-actions">\r\n            <li role="presentation">\r\n              <a role="menuitem">\r\n                Compose Mail\r\n              </a>\r\n            </li>\r\n            <li role="presentation">\r\n              <a role="menuitem">\r\n                Inbox\r\n              </a>\r\n            </li>\r\n            <li role="presentation">\r\n              <a role="menuitem">\r\n                Sent\r\n              </a>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="m-mail-opened_header_bottom_right">\r\n        <svg class="m-mail-opened_header_icon-clips" data-icon="clips" version="1.1" xmlns="http://www.w3.org/2000/svg" width="12" height="12" aria-labelledby="svgicon_clips-title-({%=mail_number%})-opened svgicon_clips-desc-({%=mail_number%})-opened">\r\n          <title id="svgicon_clips-title-({%=mail_number%})-opened">Clips icon</title>\r\n          <desc id="svgicon_clips-desc-({%=mail_number%})-opened">This e-mail has attachments</desc>\r\n          <use xlink:href="#clips-icon" />\r\n        </svg>\r\n\r\n        <p class="m-mail-opened_header_attachments-qty">(2)</p>\r\n\r\n        <time class="m-mail-opened_header_date" datetime="2014-09-20T23:30">\r\n          Today, ({%=month_string%}) ({%=day%}), ({%=time%})\r\n        </time>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="m-mail-opened_body">\r\n    <p class="m-mail-opened_body_mail-content">\r\n      ({%=content_long%})\r\n    </p>\r\n  </div>\r\n\r\n  <div class="m-mail-opened_footer">\r\n    <div class="m-mail-opened_footer-attachments">\r\n      <p class="m-mail-opened_footer-attachments_qty">\r\n        <strong>Attachments</strong> (2 files, 13.6 <abbr title="Kilobyte">KB</abbr>)\r\n      </p>\r\n\r\n      <!-- Fst Attachment-->\r\n      <div class="m-mail-opened_footer-attachments_item">\r\n        <div class="m-mail-opened_footer-attachments_item-left">\r\n          <abbr class="m-mail-opened_footer-attachments_item-extension" title="HyperText Markup Language">HTML</abbr>\r\n          <p class="m-mail-opened_footer-attachments_item-desc">\r\n            <strong>index.html</strong> (3.4 <abbr class="m-mail-opened_footer-attachments_item-desc-" title="Kilobyte">KB</abbr>)\r\n          </p>\r\n        </div>\r\n        <ul class="m-mail-opened_footer-attachments_options">\r\n          <li class="m-mail-opened_footer-attachments_options-share"><a href="#">Share</a></li>\r\n          <li class="m-mail-opened_footer-attachments_options-view"><a href="#">View</a></li>\r\n          <li class="m-mail-opened_footer-attachments_options-download"><a download>Download</a></li>\r\n        </ul>\r\n      </div>\r\n\r\n      <!-- Snd Attachment-->\r\n      <div class="m-mail-opened_footer-attachments_item">\r\n        <div class="m-mail-opened_footer-attachments_item-left">\r\n          <abbr class="m-mail-opened_footer-attachments_item-extension" title="HyperText Markup Language">CSS</abbr>\r\n          <p class="m-mail-opened_footer-attachments_item-desc">\r\n            <strong>style.html</strong> (10.2 <abbr class="m-mail-opened_footer-attachments_item-desc-" title="Kilobyte">KB</abbr>)\r\n          </p>\r\n        </div>\r\n        <ul class="m-mail-opened_footer-attachments_options">\r\n          <li class="m-mail-opened_footer-attachments_options-share"><a href="#">Share</a></li>\r\n          <li class="m-mail-opened_footer-attachments_options-view"><a href="#">View</a></li>\r\n          <li class="m-mail-opened_footer-attachments_options-download"><a download>Download</a></li>\r\n        </ul>\r\n      </div>\r\n\r\n    </div>\r\n    <div class="m-mail-opened_footer-actions">\r\n      <button class="m-mail-opened_footer-actions_btn-reply m-btn-text" type="button">\r\n        <span class="m-mail-opened_footer-actions_btn-reply-content">\r\n          <svg class="m-mail-opened_footer-actions_icon-reply" data-icon="reply" version="1.1" xmlns="http://www.w3.org/2000/svg" width="15" height="15">\r\n            <use xlink:href="#undo-icon"></use>\r\n          </svg>\r\n          <span class="m-mail-opened_footer-actions_btn-reply-text">Reply</span>\r\n        </span>\r\n      </button>\r\n    </div>\r\n  </div>\r\n</article>\r\n'}),define("datesHandling",[],function(){var e={"01":"Jan","02":"Feb","03":"Mar","04":"Apr","05":"May","06":"Jun","07":"Jul","08":"Aug","09":"Sep",10:"Oct",11:"Nov",12:"Dec"},t={formatDate:function(t){var n=t.match(/(\d{2})\/(\d{2})/);return n!==null?{monthNumber:n[2],monthShortString:e[n[2]],day:n[1]}:{}},formatTime:function(e){var t=e.match(/(\d{2}):\d{2}/),n=t[0],r=t[1];return r>=12?n+" PM":n+" AM"}};return t}),define("mailInfosFromJSON",["datesHandling"],function(e){var t={mailsJSONArray:[],getMailInfos:function(n){var r=t.mailsJSONArray[n].created_at||"";this.senderName=t.mailsJSONArray[n].owner||"me",this.subject=t.mailsJSONArray[n].title||"",this.mailNumber=t.mailsJSONArray[n].id||9999,this.contentLong=t.mailsJSONArray[n].body||"empty e-mail",this.contentShort=this.contentLong.slice(0,35-this.subject.length)+"..."||"empty e-mail",this.monthNumber=e.formatDate(r).monthNumber,this.monthString=e.formatDate(r).monthShortString,this.day=e.formatDate(r).day,this.time=e.formatTime(r),this.category=t.mailsJSONArray[n].category.replace(/\s/g,"-").toLowerCase()},JsonLength:function(){return t.mailsJSONArray.length}};return t}),define("mailCreation",["text!shortMail","text!openedMail","mailInfosFromJSON"],function(e,t,n){var r={parseTemplate:function(e,t,n){var r="";return n&&(e=e.replace("({%=time%})",t.time)),r=e.replace(/\({%=mail_number%}\)/g,t.mailNumber).replace(/\({%=sender_name%}\)/g,t.senderName).replace("({%=month_number%})",t.monthNumber).replace("({%=month_string%})",t.monthString).replace(/\({%=day%}\)/g,t.day).replace(/\({%=category%}\)/g,t.category).replace(/\({%=subject%}\)/g,t.subject).replace("({%=content_short%})",t.contentShort).replace("({%=content_long%})",t.contentLong),r},createShortMails:function(){var t=n.JsonLength(),i=0,s="",o="";for(i,t;i<t;i++){var u=new n.getMailInfos(i);s=r.parseTemplate(e,u),o+=s}return o},createLongMail:function(e){var i=e-1,s=new n.getMailInfos(i);return r.parseTemplate(t,s,!0)}};return r}),define("polyfills",[],function(){var e={mediaQuery:function(){window.matchMedia=function(){var e=window.styleMedia||window.media;if(!e){var t=document.createElement("style"),n=document.getElementsByTagName("script")[0],r=null;t.type="text/css",t.id="matchmediajs-test",n.parentNode.insertBefore(t,n),r="getComputedStyle"in window&&window.getComputedStyle(t,null)||t.currentStyle,e={matchMedium:function(e){var n="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return t.styleSheet?t.styleSheet.cssText=n:t.textContent=n,r.width==="1px"}}}return function(t){return{matches:e.matchMedium(t||"all"),media:t||"all"}}}()}};return e}),define("mailOpenedControl",["mailCreation","featureDetection","polyfills"],function(e,t,n){var r={idNumberLastMailCreated:0,hideMail:function(e){var t=document.getElementById("mail-"+e);t&&t.setAttribute("hidden","")},openCloseMail:function(){t.matchMedia()&&n.mediaQuery();var i=window.matchMedia("(min-width:60em)");if(!i.matches)return!0;var s=this,o=document.getElementById("main"),u=this.getAttribute("data-id"),a=r.idNumberLastMailCreated,f=document.getElementsByClassName("m-short-mail--active")[0],l=document.getElementById("mail-"+u);f&&(f.className=f.className.replace(" m-short-mail--active","")),s.className+=" m-short-mail--active",r.hideMail(a);if(!l){var c=e.createLongMail(u);o.insertAdjacentHTML("beforeend",c)}else l.removeAttribute("hidden");r.idNumberLastMailCreated=u},addClickListeners:function(){var e=document.getElementsByClassName("js-short-mail"),t=e.length,n=0;for(n,t;n<t;n++)e[n].addEventListener("click",r.openCloseMail)}};return r}),define("mailListVisibilty",[],function(){var e={elsShortMailList:document.getElementsByClassName("js-short-mail"),elLabel:function(e){return document.getElementById("label-"+e)},elsLabels:document.getElementsByClassName("js-labels"),showOnlyMatchingLabel:function(t){var n=e.elsShortMailList,r=!1,i,s;for(i=0,s=n.length;i<s;i++){var o=n[i].getAttribute("data-label");o!==t?n[i].setAttribute("hidden",""):(n[i].removeAttribute("hidden"),r=!0)}return r},showAll:function(){var t=e.elsShortMailList,n=document.getElementById("mail-list-zero-mails"),r=0,i=0;n.setAttribute("hidden","");for(r=0,i=t.length;r<i;r++)t[r].removeAttribute("hidden")},showMessageNone:function(e,t){var n=document.getElementById("mail-list-zero-mails");e?n.setAttribute("hidden",""):(n.removeAttribute("hidden"),n.className="",n.className="m-mail-list_zero-mails th-label-"+t+"-pe")},setAttrToLabelSelected:function(e,t){var n,r;for(n=0,r=e.length;n<r;n++)e[n].removeAttribute("data-selected");t.setAttribute("data-selected","")}};return function(t){var n=e.elLabel(t),r=e.elsLabels;n.addEventListener("click",function(){if(n.hasAttribute("data-selected"))e.showAll(),n.removeAttribute("data-selected");else{var i=e.showOnlyMatchingLabel(t);e.setAttrToLabelSelected(r,n),e.showMessageNone(i,t)}})}}),define("app",["featureDetection","mailCreation","mailOpenedControl","mailListVisibilty","mailInfosFromJSON"],function(e,t,n,r,i){var s={featureDetection:function(){if(!e.svg()){var t=document.getElementById("mail-list-main"),n=document.getElementsByTagName("body")[0],r=t.getElementsByTagName("svg"),i=0,s=r.length;n.className+="no-svg";for(i,s;i<s;i++){var o=r[i].getAttribute("data-icon");r[i].insertAdjacentHTML("beforebegin",'<div class="m-fallback_icon-'+o+'"></div>')}}},storeMailsJSON:function(e){i.mailsJSONArray=JSON.parse("["+e+"]")},showApp:function(){var e=document.getElementById("loading-app"),t=document.getElementById("app");e.setAttribute("hidden",""),t.removeAttribute("hidden")},buildMailList:function(){var e=document.getElementById("mail-list");e.innerHTML=t.createShortMails()},addClickListenerToLabels:function(){var e=["clients","family","friends","social"],t=0,n=e.length;for(t,n;t<n;t++)r(e[t])},addClickListenerToMailList:function(){n.addClickListeners()}};return function(){var e=new XMLHttpRequest;e.open("GET","/mail-app/db/mails.json"),e.onreadystatechange=function(){if(e.readyState===4&&e.status===200){var t=e.responseText;s.storeMailsJSON(t),s.buildMailList(),s.addClickListenerToLabels(),s.addClickListenerToMailList(),s.featureDetection(),s.showApp()}},e.send(null)}}),requirejs.config({paths:{app:"modules/app",datesHandling:"modules/datesHandling",featureDetection:"modules/featureDetection",mailInfosFromJSON:"modules/mailInfosFromJSON",mailListVisibilty:"modules/mailListVisibilty",mailOpenedControl:"modules/mailOpenedControl",mailCreation:"modules/mailCreation",polyfills:"modules/polyfills",openedMail:"templates/opened-mail.html",shortMail:"templates/short-mail.html",text:"../vendors/bower_components/text/text"}}),require(["app"],function(e){e()}),define("main",function(){});
